getwd()
rstudioapi::executeCommand('closeProject')
## Load the data
df_bnes_panel <- read_dta("data/bnes_survey/BES2024_W29_Panel_v29.1.dta.zip") |>
zap_labels() |>
filter(wave4 == 1 | wave5 == 1 | wave6 == 1 | wave11 == 1 | wave12 == 1 | wave13 == 1 | wave17 == 1 | wave18 == 1 | wave19 == 1) |>
dplyr::select(#eligible,
id, waves_taken,
starts_with("oslaua"),
starts_with("pconW"), starts_with("new_pconW"), # Area IDs
starts_with("countryW"),
starts_with("CampaignDay"),
countryOfBirth2W27, starts_with("workingStatus"), starts_with("anyUni"), starts_with("p_education"),
starts_with("p_edlevel"), starts_with("p_edlevelUni"), starts_with("p_ethnicity"), starts_with("p_gross_household"),
starts_with("p_gross_personal"), starts_with("p_hh_size"), starts_with("p_hh_children"), starts_with("p_housing"),
starts_with("p_marital"), starts_with("p_paper_read"), starts_with("p_work_stat"),
p_past_vote_2005, p_past_vote_2010, p_past_vote_2015, p_past_vote_2017,
p_turnout_2005, p_turnout_2010, p_turnout_2015, p_turnout_2017,
gender,
starts_with("miiW"), starts_with("mii_catW"), starts_with("bestOnMII"), starts_with("handleMII"),
starts_with("turnoutUKGeneral"),  starts_with("genElecTurnoutRetro"),  starts_with("generalElectionVoteRetro"),
starts_with("decidedVote"),  starts_with("generalElectionVote"), #(in postelection waves this is retro)
starts_with("reasonForVote"), #(postelection),
starts_with("generalElecCertainty"), #You said that you would be most likely to vote for $generalElectionVotetext in a General Election. How certain are you that you would vote for this party?
starts_with("debateOneWatch"), #- W5W8W12W18,starts_with("partyIdW"),  starts_with("partyIdSqueezeW"),  starts_with("partyIdStrengthW"),
#pidWeThey, pidInterestedOthers, pidCriticiseParty, pidCommonParty, pidRuinDay, pidConnected, pidMyParty, pidPraiseGood,
starts_with("electionInterestW"), starts_with("polAttentionW"), starts_with("discussPolDaysW"), starts_with("polKnow"),
starts_with("partyMemberW"), starts_with("partyMemberNow"),
starts_with("twitter"), starts_with("fb"),
starts_with("infoSourceInternet"), # (Internet (not including online newspapers))
starts_with("trustMPsW"),
starts_with("lr"), #lr_scale, lr1, lr2, lr3, lr4,lr5,
starts_with("al_scaleW"),
starts_with("populism"),
starts_with("like"),
starts_with("ptv"),
starts_with("leftRight"),
starts_with("lr"),
contains("Priorities"),
contains("United"),
starts_with("competent"),
starts_with("integrity"),
contains("sharedContentOnline"),
starts_with("econPersonalRetro"),  starts_with("econGenRetro"),
#euID, goodTimePurchase, achieveReduceImmig, risksEcon,
#changeEconomy, changeNHS, changeEducation, changeCostLive, changeImmig, changeCrime, changeEconomyLab, changeNHSLab, changeEducationLab, changeCostLiveLab, changeImmigLab, changeCrimeLab,
#redistSelf, redistCon, redistLab, redistLD, redistUKIP, redistSNP, redistPC, redistGreen, redistTIG, redistBrexit,
#immigself, immigCon, immigLab, immigLD, immigSNP, immigPC, immigUKIP, immigGreen, immigTIG, immigBrexit,
#atDemUK, satDemScot, satDemWales, satDemEng, welfarePreference,
starts_with("bestLeaderCampaign"), # W5W6
starts_with("worstLeaderCampaign"), # W5W6
#campaignTone, # W5W6W12W18 In their campaigns political parties can focus on criticising the policies and personalities of other parties, or they can focus on putting forward their own policies and personalities. What is, in your view, the focus of the campaign of each of the following parties?
#partyEmotions, #W4W6,
)
## Working Directory
setwd(githubdir)
setwd("/Users/iasmingoes/Library/CloudStorage/Dropbox/twitter_uk151719/")
library(tidyverse)
library(haven)
## Load the data
df_bnes_panel <- read_dta("data/bnes_survey/BES2024_W29_Panel_v29.1.dta.zip") |>
zap_labels() |>
filter(wave4 == 1 | wave5 == 1 | wave6 == 1 | wave11 == 1 | wave12 == 1 | wave13 == 1 | wave17 == 1 | wave18 == 1 | wave19 == 1) |>
dplyr::select(#eligible,
id, waves_taken,
starts_with("oslaua"),
starts_with("pconW"), starts_with("new_pconW"), # Area IDs
starts_with("countryW"),
starts_with("CampaignDay"),
countryOfBirth2W27, starts_with("workingStatus"), starts_with("anyUni"), starts_with("p_education"),
starts_with("p_edlevel"), starts_with("p_edlevelUni"), starts_with("p_ethnicity"), starts_with("p_gross_household"),
starts_with("p_gross_personal"), starts_with("p_hh_size"), starts_with("p_hh_children"), starts_with("p_housing"),
starts_with("p_marital"), starts_with("p_paper_read"), starts_with("p_work_stat"),
p_past_vote_2005, p_past_vote_2010, p_past_vote_2015, p_past_vote_2017,
p_turnout_2005, p_turnout_2010, p_turnout_2015, p_turnout_2017,
gender,
starts_with("miiW"), starts_with("mii_catW"), starts_with("bestOnMII"), starts_with("handleMII"),
starts_with("turnoutUKGeneral"),  starts_with("genElecTurnoutRetro"),  starts_with("generalElectionVoteRetro"),
starts_with("decidedVote"),  starts_with("generalElectionVote"), #(in postelection waves this is retro)
starts_with("reasonForVote"), #(postelection),
starts_with("generalElecCertainty"), #You said that you would be most likely to vote for $generalElectionVotetext in a General Election. How certain are you that you would vote for this party?
starts_with("debateOneWatch"), #- W5W8W12W18,starts_with("partyIdW"),  starts_with("partyIdSqueezeW"),  starts_with("partyIdStrengthW"),
#pidWeThey, pidInterestedOthers, pidCriticiseParty, pidCommonParty, pidRuinDay, pidConnected, pidMyParty, pidPraiseGood,
starts_with("electionInterestW"), starts_with("polAttentionW"), starts_with("discussPolDaysW"), starts_with("polKnow"),
starts_with("partyMemberW"), starts_with("partyMemberNow"),
starts_with("twitter"), starts_with("fb"),
starts_with("infoSourceInternet"), # (Internet (not including online newspapers))
starts_with("trustMPsW"),
starts_with("lr"), #lr_scale, lr1, lr2, lr3, lr4,lr5,
starts_with("al_scaleW"),
starts_with("populism"),
starts_with("like"),
starts_with("ptv"),
starts_with("leftRight"),
starts_with("lr"),
contains("Priorities"),
contains("United"),
starts_with("competent"),
starts_with("integrity"),
contains("sharedContentOnline"),
starts_with("econPersonalRetro"),  starts_with("econGenRetro"),
#euID, goodTimePurchase, achieveReduceImmig, risksEcon,
#changeEconomy, changeNHS, changeEducation, changeCostLive, changeImmig, changeCrime, changeEconomyLab, changeNHSLab, changeEducationLab, changeCostLiveLab, changeImmigLab, changeCrimeLab,
#redistSelf, redistCon, redistLab, redistLD, redistUKIP, redistSNP, redistPC, redistGreen, redistTIG, redistBrexit,
#immigself, immigCon, immigLab, immigLD, immigSNP, immigPC, immigUKIP, immigGreen, immigTIG, immigBrexit,
#atDemUK, satDemScot, satDemWales, satDemEng, welfarePreference,
starts_with("bestLeaderCampaign"), # W5W6
starts_with("worstLeaderCampaign"), # W5W6
#campaignTone, # W5W6W12W18 In their campaigns political parties can focus on criticising the policies and personalities of other parties, or they can focus on putting forward their own policies and personalities. What is, in your view, the focus of the campaign of each of the following parties?
#partyEmotions, #W4W6,
)
# For lower RAM:
#write_csv(df_bnes_panel,gzfile("data/df_bnes_panel_reduced.csv.gz"))
df_bnes_panel <- read_csv("data/df_bnes_panel_reduced.csv.gz")
View(df_bnes_panel)
